/*! @misonou/brew-extension-auth v0.2.1 | (c) misonou | https://misonou.github.io */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@azure/msal-browser"),require("brew-js"),require("zeta-dom")):"function"==typeof define&&define.amd?define("@misonou/brew-extension-auth/msal",["@azure/msal-browser","brew-js","zeta-dom"],t):"object"==typeof exports?exports.MsalAuthProvider=t(require("@azure/msal-browser"),require("brew-js"),require("zeta-dom")):(e.brew=e.brew||{},e.brew.Auth=e.brew.Auth||{},e.brew.Auth.MsalAuthProvider=t(e.msal,e.brew,e.zeta))}(self,(function(e,t,n){return function(){"use strict";var o={735:function(t){t.exports=e},760:function(e){e.exports=t},231:function(e){e.exports=n}},r={};function i(e){var t=r[e];if(void 0!==t)return t.exports;var n=r[e]={exports:{}};return o[e](n,n.exports,i),n.exports}i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};var c={};return function(){i.d(c,{default:function(){return b}});var e=i(735),t=i(760),n=t.getJSON,o=t.isSubPathOf,r=i(231).util,u=r.define,a=r.extend,s=r.is,f="https://login.microsoftonline.com/",l={},p={},d={common:!0,organizations:!0},g={cache:{cacheLocation:"localStorage"}};function h(){delete sessionStorage["msal.interaction.status"]}function v(t,r,i){var c=i.scopes;function u(e,t){return r.acquireTokenSilent({redirectUri:t.redirectUri,account:e.account,scopes:c})}function a(e){if(e){var t=e.account;return r.setActiveAccount(t),{account:t,accountId:t.homeAccountId,accessToken:e.accessToken,expiresOn:e.expiresOn}}}return{key:t,authType:"federated",providerType:"msal",refresh:u,isHandleable:function(e){if(!/@(.+)$/.test(e))return!1;var t,i=r.getConfiguration().auth.authority;return!!d[i.slice(f.length)]||(t=RegExp.$1,p[t]||(p[t]=n(f+t+"/v2.0/.well-known/openid-configuration").then((function(e){return e.issuer}),(function(e){if(400===e.status)return"";delete p[t]})))).then((function(e){return!!o(e,i)}))},init:function(t){return r.enableAccountStorageEvents(),r.addEventCallback((function(n){n.eventType===e.EventType.ACCOUNT_REMOVED&&t.revokeSession(n.payload.homeAccountId)})),r.initialize().then((function(){return r.handleRedirectPromise()})).then((function(e){var n=r.getActiveAccount();return e||n&&u({account:n},t)})).then(a,(function(){r.setActiveAccount(null)}))},login:function(e,t){var n={redirectUri:t.redirectUri,loginHint:e.loginHint,scopes:c};return h(),"popup"===e.interaction?r.loginPopup(n).then(a):r.loginRedirect(n)},logout:function(e,t){var n=r.getAccount({homeAccountId:e.accountId});return e.singleLogout?(h(),"popup"===e.interaction?r.logoutPopup({account:n}):r.logoutRedirect({account:n,postLogoutRedirectUri:t.redirectUri})):r.clearCache({account:n})}}}u(l,{defaultConfig:g,setDefault:function(e){a(!0,g,e)},create:function(t,n,o,r){return"string"==typeof n&&(n={scopes:r,config:{auth:{clientId:n,authority:o}}}),v(t,s(n,e.PublicClientApplication)||new e.PublicClientApplication(a(!0,{},g,n.config)),n)}});var b=l}(),c=c.default}()}));
//# sourceMappingURL=brew-auth-msal.min.js.map